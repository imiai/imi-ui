{"version":3,"file":"index.js","sources":["../../../src/components/select-type-2/index.tsx"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport { useClickAnyWhere, useOnClickOutside } from \"../../hooks\";\nimport { ArrowDownIcon, ArrowDownSpecialIcon } from \"../../icons\";\nimport Card from \"../card\";\nimport Input from \"../input\";\nimport { ISelect } from \"../select\";\nimport './styles.scss';\n\n\nconst SelectType2 = (props: ISelect) => {\n    const {options, className, inputClassName = '', label, withLabel, selectingOption, ...rest} = props;\n    const [showOptions, setShowOptions] = useState(false);\n    const ref = useRef(null)\n    const optionsRef = useRef(null);\n    const [optionsPosition, setOptionsPosition] = useState({top: 'calc(100% + 1px)', bottom: 'auto'})\n\n    useLayoutEffect(() => {\n        let el = ref.current;\n        if (el) {\n            let _height = options.length * 36;\n            _height = _height > 330 ? 330 : _height;\n            if (el.offsetParent.scrollHeight - el.offsetTop < _height) {\n                setOptionsPosition({top: 'auto', bottom: 'calc(100% + 1px)'})\n            }\n        }\n    }, [ref])\n\n    useEffect(() => {\n        if (showOptions && optionsRef) {\n            let els = optionsRef.current.getElementsByClassName('active')\n            if (els && els.length > 0) {\n                let el = els[0]\n                optionsRef.current.scrollTo({top: el.offsetTop, left: 0})\n            }\n        }\n    }, [showOptions])\n\n    useOnClickOutside(ref, () => setShowOptions(false))\n    \n    const onInputChange = (event: any, option: any) => {\n        if (option) {\n            event.target.value = option;\n            rest.onChange(event)\n        } else {\n            rest.onChange(event)\n        }\n        let timer = setTimeout(() => {\n            setShowOptions(false)\n            clearTimeout(timer)\n        }, 50)\n    }\n\n    return (\n        <div className={`imiui-select-t2${className ? ` ${className}` : ''}`} ref={ref} onClick={() => setShowOptions(!showOptions)}>\n            <Input \n                {...rest}\n                value={selectingOption?.label || ''}\n                inputClassName={inputClassName}\n                disabled\n                readOnly\n                withLabel={withLabel}\n            />\n            <div className=\"select-line\">\n                <p className=\"t-label-semibold-tiny c-primary-blue\">{selectingOption?.label || ''}</p>\n                <ArrowDownIcon width={20} height={20} fill=\"var(--imiui-gray-200)\"/>\n            </div>\n            {showOptions && <Card ref={optionsRef} id='imiui-select-options-id' style={{...optionsPosition}} className=\"options\" variant='dialogue'>\n                {options.map((option, index) => {\n                    return (\n                        <button key={index} onClick={(event) => onInputChange(event, option)} className={`t-label-regular-tiny ${option.value === selectingOption?.value ? 'active' : ''}`} >\n                            <p className=\"t-label-regular-supertiny\">{option.label}</p>\n                        </button>\n                    )\n                })}\n            </Card>}\n        </div>\n    )\n}\n\nexport default SelectType2"],"names":[],"mappings":"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"}