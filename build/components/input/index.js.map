{"version":3,"file":"index.js","sources":["../../../src/components/input/index.tsx"],"sourcesContent":["import { CloseT2Icon } from \"../../icons\";\nimport React, { Fragment, useLayoutEffect, useRef, useState } from \"react\";\nimport './styles.scss';\nimport Card from \"../card\";\n\ninterface ISelectItem {\n    label: string;\n    value: any;\n}\n\ninterface IInputProps extends React.HTMLProps<HTMLInputElement> {\n    onClear?: Function;\n    endIcon?: React.ReactNode;\n    onEndIconClick?: Function;\n    isError?: Boolean;\n    withLabel?: Boolean;\n    hint?: string;\n    error?: string;\n    options?: Array<ISelectItem>;\n    inputClassName?: string;\n}\n\nconst Input = (props: IInputProps) => {\n    const ref = useRef(null);\n\n    const { options = [], placeholder = '', className, inputClassName = '', withLabel = false, hint = '', error = '', isError = false, onClear, endIcon, onEndIconClick, style = {}, ...rest } = props;\n    const [focused, setFocused] = useState(false)\n    const [optionsPosition, setOptionsPosition] = useState({top: 'calc(100% + 1px)', bottom: 'auto'})\n    const [renderOptions, setRenderOptions] = useState<Array<ISelectItem>>(options);\n\n    useLayoutEffect(() => {\n        let el = ref.current;\n        if (el) {\n            let _height = options.length * 36;\n            _height = _height > 330 ? 330 : _height;\n            if (el.offsetParent.scrollHeight - el.offsetTop < _height) {\n                setOptionsPosition({top: 'auto', bottom: 'calc(100% + 1px)'})\n            }\n        }\n    }, [ref])\n\n\n    const onFocus = () => {\n        setFocused(true)\n        rest.onFocus\n    }\n\n    const onBlur = () => {\n        let timer = setTimeout(() => {\n            setFocused(false);\n            clearTimeout(timer);\n        }, 100)\n        rest.onBlur\n    }\n\n    const getInputWidth = () => {\n        let minus = withLabel ? 36 : 0;\n        if (onClear && endIcon) {\n            minus += 60 + 16;\n            return minus;\n        }\n        if (onClear || endIcon) {\n            minus += 20 + 16;\n            return minus;\n        }\n        return minus\n    }\n\n    const onInputChange = (event: any, option: ISelectItem) => {\n        let _options = options.filter(item => item.label.includes(event.target.value))\n        setRenderOptions(_options)\n        if (option) {\n            event.target.value = option.value;\n            rest.onChange(event)\n        } else {\n            rest.onChange(event)\n        }\n    }\n\n    return (\n        <Fragment>\n            <div ref={ref} className={`imiui-input${isError ? ' error' : ''}${rest.disabled ? ' disabled' : ''}${withLabel ? ' label' : ''}${className ? ` ${className}` : ''}`}>\n                <input {...rest} onFocus={onFocus} onBlur={onBlur} onChange={(event) => onInputChange(event, null) } className={`t-label-regular-tiny ${inputClassName}`} placeholder={placeholder} style={{ width: `calc(100% - ${getInputWidth()}px`, ...style }} />\n                {withLabel && <label>{placeholder}</label>}\n                <div className=\"icon-container\">\n                    {onClear && !rest.disabled &&\n                        <button type=\"button\" className=\"icon close\" onClick={() => onClear()}>\n                            <CloseT2Icon />\n                        </button>}\n                    {onClear && endIcon && <hr />}\n                    {endIcon &&\n                        <button type=\"button\" className=\"icon\" onClick={onEndIconClick ? () => onEndIconClick() : () => { }}>\n                            {endIcon}\n                        </button>\n                    }\n                </div>\n                {focused && <Card className=\"autocomplete-options\" variant='dialogue' style={{...optionsPosition}} >\n                    {renderOptions.map((option, index) => {\n                        return (\n                            <button type=\"button\" key={index} onClick={(event) => onInputChange(event, option)} className={`t-label-regular-tiny ${option.value === rest.value ? 'active' : ''}`}>\n                               <div>{option.label}</div>\n                            </button>\n                        )\n                    })}\n                </Card>}\n            </div>\n            {!error && hint && <span className=\"imiui-input-note hint t-label-regular-supertiny\">{hint}</span>}\n            {error && <span className=\"imiui-input-note error t-label-regular-supertiny\">{error}</span>}\n        </Fragment>\n    )\n}\n\nexport default Input;"],"names":[],"mappings":"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"}