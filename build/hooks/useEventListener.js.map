{"version":3,"file":"useEventListener.js","sources":["../../src/hooks/useEventListener.tsx"],"sourcesContent":["import { RefObject, useEffect, useRef } from 'react'\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\n// See: https://usehooks-ts.com/react-hook/use-isomorphic-layout-effect\n\nfunction useEventListener<K extends keyof WindowEventMap>(\n  eventName: K,\n  handler: (event: WindowEventMap[K]) => void,\n): void\nfunction useEventListener<\n  K extends keyof HTMLElementEventMap,\n  T extends HTMLElement = HTMLDivElement,\n>(\n  eventName: K,\n  handler: (event: HTMLElementEventMap[K]) => void,\n  element: RefObject<T>,\n): void\n\nfunction useEventListener<\n  KW extends keyof WindowEventMap,\n  KH extends keyof HTMLElementEventMap,\n  T extends HTMLElement | void = void,\n>(\n  eventName: KW | KH,\n  handler: (\n    event: WindowEventMap[KW] | HTMLElementEventMap[KH] | Event,\n  ) => void,\n  element?: RefObject<T>,\n) {\n  // Create a ref that stores handler\n  const savedHandler = useRef(handler)\n\n  useIsomorphicLayoutEffect(() => {\n    savedHandler.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    // Define the listening target\n    const targetElement: T | Window = element?.current || window\n    if (!(targetElement && targetElement.addEventListener)) {\n      return\n    }\n\n    // Create event listener that calls handler function stored in ref\n    const eventListener: typeof handler = event => savedHandler.current(event)\n\n    targetElement.addEventListener(eventName, eventListener)\n\n    // Remove event listener on cleanup\n    return () => {\n      targetElement.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element])\n}\n\nexport default useEventListener\n"],"names":[],"mappings":";;;AAkBA,SAAS,gBAAgB,CAKvB,SAAkB,EAClB,OAES,EACT,OAAsB,EAAA;;AAGtB,IAAA,IAAM,YAAY,GAAG,MAAM,CAAC,OAAO,CAAC,CAAA;AAEpC,IAAA,yBAAyB,CAAC,YAAA;AACxB,QAAA,YAAY,CAAC,OAAO,GAAG,OAAO,CAAA;AAChC,KAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA;AAEb,IAAA,SAAS,CAAC,YAAA;;AAER,QAAA,IAAM,aAAa,GAAe,CAAA,OAAO,KAAP,IAAA,IAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,OAAO,KAAI,MAAM,CAAA;QAC5D,IAAI,EAAE,aAAa,IAAI,aAAa,CAAC,gBAAgB,CAAC,EAAE;YACtD,OAAM;AACP,SAAA;;AAGD,QAAA,IAAM,aAAa,GAAmB,UAAA,KAAK,IAAI,OAAA,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA,EAAA,CAAA;AAE1E,QAAA,aAAa,CAAC,gBAAgB,CAAC,SAAS,EAAE,aAAa,CAAC,CAAA;;QAGxD,OAAO,YAAA;AACL,YAAA,aAAa,CAAC,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAC,CAAA;AAC7D,SAAC,CAAA;AACH,KAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAA;AAC1B;;;;"}